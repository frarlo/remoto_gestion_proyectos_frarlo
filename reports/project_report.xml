<odoo>
    <!-- Siguiendo el ejemplo visto en la TC -->
    <record id="project_pdf_report" model="ir.actions.report">
      <field name="name">Resumen del proyecto</field>
      <field name="model">gestion_proyectos.project</field>
      <field name="report_type">qweb-pdf</field>
      <field name="report_name">gestion_proyectos.report_project</field>
      <field name="binding_model_id" ref="model_gestion_proyectos_project"/>
      <field name="binding_type">report</field>
      <field name="binding_view_types">list,form</field>
      <field name="print_report_name">'Resumen del Proyecto- %s' % (object.auto_id)</field>
    </record>

    <!-- Posible mejora: otro tipo de report para proyectos finalizados donde en función de los hitos mostramos más datos -->

    <!-- Posibles mejoras: fase actual del proyecto / mostrar tareas PENDIENTES -->
    <template id="gestion_proyectos.report_project">
      <t t-call="web.html_container">
        <t t-foreach="docs" t-as="project">
          <t t-call="web.external_layout">
            <div class="page">
              <div class="datos-proyecto" style="padding: 3px; margin-bottom: 5px;"> <!-- TODO: Mejorar la presentación de los datos básicos del proyecto -->
                <h5 style="font-weight: bold;">Nombre del Proyecto:</h5>
                <p><t t-esc="project.auto_id"/></p>
                <h5 style="font-weight: bold;">Cliente:</h5>
                <p><t t-esc="project.cliente_id.name"/></p>
                <h5 style="font-weight: bold;">Ingeniero encargado:</h5>
                <p><t t-esc="project.ingeniero_id.name"/></p>
                <h5 style="font-weight: bold;">Fecha de inicio </h5>
                <p><t t-esc="project.fecha_inicio"/></p>
                <h5 style="font-weight: bold;">Fecha estimada:</h5>
                <div>
                  <p t-if="project.fecha_estimada"><t t-esc="project.fecha_estimada"/></p>
                  <p t-else="">Sin fecha estimada</p>
                </div>
              </div>
              <div class="productos-materiales" style="padding: 3px; margin-bottom: 5px;">
                <div class="productos" >
                  <h5 style="font-weight: bold;">Productos contratados</h5>
                    <table style="border-collapse: collapse; width: 100%;">
                      <thead>
                        <tr style="background-color: #4A90E2; color: white;">
                        <th style="padding: 8px; border: 1px solid #dddddd;">Tipo de material utilizado</th>
                      </tr>
                      </thead>
                      <tbody>
                        <t t-foreach="project.products_ids" t-as="product">
                          <tr style="background-color: #f2f2f2;">
                            <td style="padding: 8px; border: 1px solid #dddddd;"><t t-esc="product.name"/></td>
                          </tr>
                        </t>
                      </tbody>
                    </table>
                </div>
                <div class="materiales">
                  <h5 style="font-weight: bold;">Materiales utilizados</h5>
                    <table style="border-collapse: collapse; width: 100%;">
                      <thead>
                        <tr style="background-color: #4A90E2; color: white;">
                          <th style="padding: 8px; border: 1px solid #dddddd;">Tipo de material utilizado</th>
                        </tr>
                      </thead>
                      <tbody>
                        <t t-foreach="project.materials_ids" t-as="material">
                          <tr style="background-color: #f2f2f2;">
                            <td style="padding: 8px; border: 1px solid #dddddd;"><t t-esc="material.name"/></td>
                          </tr>
                        </t>
                      </tbody>
                    </table>
                </div>
              </div>
              <div class="operarios-vehiculos" style="padding: 3px; margin-bottom: 5px;">
                <div class="operarios">
                  <h5 style="font-weight: bold;">Operarios encargados</h5>
                  <table style="border-collapse: collapse; width: 100%;">
                    <thead>
                      <tr style="background-color: #4A90E2; color: white;">
                        <th style="padding: 8px; border: 1px solid #dddddd;">Nombre del operario</th>
                        <th style="padding: 8px; border: 1px solid #dddddd;">Teléfono contacto</th>
                      </tr>
                    </thead>
                    <tbody>
                      <t t-foreach="project.operarios_ids" t-as="operario">
                        <tr style="background-color: #f2f2f2;">
                          <td style="padding: 8px; border: 1px solid #dddddd;"><t t-esc="operario.name"/></td>
                          <td style="padding: 8px; border: 1px solid #dddddd;"><t t-esc="operario.work_phone"/></td>
                        </tr>
                      </t>
                    </tbody>
                </table>
                </div>
                <div class="vehiculos" style="padding-top: 3px;">
                  <h5 style="font-weight: bold;">Vehículos utilizados</h5>
                    <table style="border-collapse: collapse; width: 100%;">
                      <thead>
                        <tr style="background-color: #4A90E2; color: white;">
                          <th style="padding: 8px; border: 1px solid #dddddd;">Marca, modelo y matrícula</th>
                        </tr>
                      </thead>
                      <tbody>
                        <t t-foreach="project.vehiculos_ids" t-as="vehiculo">
                          <tr style="background-color: #f2f2f2;">
                            <td style="padding: 8px; border: 1px solid #dddddd;"><t t-esc="vehiculo.name"/></td>
                          </tr>
                        </t>
                      </tbody>
                    </table>
                </div>
              </div>
            </div>
          </t>
        </t>
      </t>
    </template>  

</odoo>